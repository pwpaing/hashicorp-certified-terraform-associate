================================================================================
                 FARO FRONTEND MONITORING INFRASTRUCTURE
                     Module 19 - Deployment Summary
================================================================================

âœ… INFRASTRUCTURE COMPONENTS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. S3 BUCKET (Source Maps Storage)
   - Bucket Name: Configurable via terraform.tfvars
   - Encryption: AES256 (enabled)
   - Versioning: Enabled
   - Public Access: Blocked
   - Purpose: Store JavaScript source maps for error decoding

2. EC2 INSTANCE (Faro Receiver)
   - Instance Type: t2.small (default, configurable)
   - OS: Amazon Linux 2 (latest)
   - Storage: 30GB encrypted EBS volume (gp3)
   - Software:
     * Docker + Docker Compose
     * Grafana Alloy (Faro receiver container)
     * s3fs-fuse for S3 mounting
     * Nginx for status page

3. IAM ROLE & POLICY
   - Role: faro-ec2-s3-access-role
   - Policy: faro-s3-access-policy
   - Instance Profile: faro-ec2-instance-profile
   - Permissions: S3 read/write access to source maps bucket

4. SECURITY GROUPS
   - faro-ssh: SSH access (port 22)
   - faro-receiver: Web traffic (ports 80, 443, 12345)

5. NETWORKING
   - Uses default VPC
   - Public IP assigned to EC2
   - Internet Gateway for outbound access

================================================================================

ğŸ“Š TERRAFORM CONFIGURATION FILES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

terraform-manifests/
â”œâ”€â”€ c1-versions.tf              (20 lines)  - Provider configuration
â”œâ”€â”€ c2-variables.tf             (24 lines)  - Input variables
â”œâ”€â”€ c3-security-groups.tf       (67 lines)  - Security group definitions
â”œâ”€â”€ c4-s3-bucket.tf             (39 lines)  - S3 bucket configuration
â”œâ”€â”€ c5-iam-role.tf              (62 lines)  - IAM role and policies
â”œâ”€â”€ c6-ami-datasource.tf        (25 lines)  - AMI data source
â”œâ”€â”€ c7-ec2-instance.tf          (35 lines)  - EC2 instance
â”œâ”€â”€ c8-outputs.tf               (40 lines)  - Output values
â”œâ”€â”€ faro-install.sh            (147 lines)  - User data script
â”œâ”€â”€ terraform.tfvars.example    (15 lines)  - Example variables
â””â”€â”€ .gitignore                  (13 lines)  - Git ignore rules

Total: 487 lines of Terraform code

================================================================================

ğŸ“š DOCUMENTATION FILES (1,775 lines)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. MODULE-OVERVIEW.md (282 lines)
   - Module introduction and learning objectives
   - Quick links to all documentation
   - Use cases and cost estimates
   - Prerequisites and setup overview

2. README.md (290 lines)
   - Complete setup guide
   - Configuration instructions
   - Post-deployment steps
   - Troubleshooting section
   - Maintenance procedures

3. QUICKSTART.md (206 lines)
   - 5-minute quick start guide
   - Step-by-step deployment
   - Verification steps
   - Common issues and solutions

4. ARCHITECTURE.md (372 lines)
   - Detailed architecture diagrams (ASCII art)
   - Component descriptions
   - Data flow diagrams
   - Security architecture
   - Scalability considerations
   - Cost optimization tips

5. INTEGRATION-EXAMPLES.md (625 lines)
   - React integration examples
   - Vue.js integration examples
   - Angular integration examples
   - Vanilla JavaScript examples
   - Source map upload methods
   - CI/CD integration (GitHub Actions, GitLab CI, Jenkins)
   - Advanced configuration examples

================================================================================

ğŸš€ DEPLOYMENT INSTRUCTIONS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

STEP 1: Prepare AWS
  $ aws configure
  $ aws ec2 create-key-pair --key-name terraform-key \
      --query 'KeyMaterial' --output text > terraform-key.pem
  $ chmod 400 terraform-key.pem

STEP 2: Configure Variables
  $ cd terraform-manifests
  $ cp terraform.tfvars.example terraform.tfvars
  $ nano terraform.tfvars
  # Update bucket_name to a unique value

STEP 3: Deploy Infrastructure
  $ terraform init
  $ terraform plan
  $ terraform apply

STEP 4: Get Outputs
  $ terraform output

You'll receive:
  - faro_endpoint_url: http://<ip>:12345
  - status_page_url: http://<ip>
  - s3_bucket_name: Your S3 bucket name
  - ssh_command: SSH connection command

STEP 5: Integrate Frontend App
  $ npm install @grafana/faro-web-sdk
  # See INTEGRATION-EXAMPLES.md for code samples

STEP 6: Upload Source Maps
  $ aws s3 cp dist/ s3://YOUR-BUCKET-NAME/ \
      --recursive --exclude "*" --include "*.map"

================================================================================

ğŸ’° COST ESTIMATE (us-east-1)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Monthly Costs:
  - EC2 t2.small (24/7):     ~$17.00
  - S3 storage:               ~$0.023/GB
  - Data transfer:            First 100GB free
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  TOTAL:                     ~$17-25/month

Cost Optimization:
  - Use Reserved Instances: Save 40-60%
  - Enable S3 Intelligent-Tiering
  - Use S3 Lifecycle policies for old maps

================================================================================

ğŸ” SECURITY FEATURES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ“ IAM role-based authentication (no hardcoded AWS keys)
âœ“ S3 bucket encryption at rest (AES256)
âœ“ EBS volume encryption
âœ“ Private S3 bucket (public access blocked)
âœ“ S3 versioning for change tracking
âœ“ Configurable security groups
âœ“ Docker container isolation

================================================================================

ğŸ“‹ POST-DEPLOYMENT CHECKLIST
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â–¡ Access status page: http://<ec2-ip>
â–¡ Verify Faro receiver: http://<ec2-ip>:12345
â–¡ SSH to instance and verify S3 mount: df -h | grep source-maps
â–¡ Check Docker container: sudo docker ps
â–¡ View Faro logs: sudo docker logs faro-receiver
â–¡ Upload test source map to S3
â–¡ Integrate frontend app with Faro SDK
â–¡ Send test data from browser
â–¡ Verify data reception in Faro logs
â–¡ Configure Loki/Tempo endpoints (optional)
â–¡ Set up SSL/TLS for production (optional)
â–¡ Restrict security groups to specific IPs (recommended)

================================================================================

ğŸ¯ USE CASES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ“ Production error monitoring and alerting
âœ“ JavaScript error debugging with source maps
âœ“ Web performance monitoring (Web Vitals)
âœ“ User behavior tracking and analytics
âœ“ Frontend observability with Grafana
âœ“ Real User Monitoring (RUM)
âœ“ Application Performance Monitoring (APM)

================================================================================

ğŸ› ï¸ TROUBLESHOOTING QUICK REFERENCE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Issue: Can't access port 12345
Fix:  Check security group allows inbound traffic on port 12345

Issue: S3 mount failed
Fix:  SSH to instance and manually mount:
      sudo s3fs BUCKET /mnt/source-maps -o iam_role=auto

Issue: Faro receiver not responding
Fix:  Check Docker container status:
      sudo docker ps
      sudo docker logs faro-receiver

Issue: Source maps not applied
Fix:  Verify source maps are in S3 and accessible at /mnt/source-maps

Issue: CORS errors in browser
Fix:  Check Alloy config allows your origin:
      cat /opt/faro-receiver/config.alloy

================================================================================

ğŸ“ SUPPORT RESOURCES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Grafana Faro:    https://grafana.com/docs/faro/
Grafana Alloy:   https://grafana.com/docs/alloy/
Terraform AWS:   https://registry.terraform.io/providers/hashicorp/aws/
s3fs-fuse:       https://github.com/s3fs-fuse/s3fs-fuse
AWS S3:          https://docs.aws.amazon.com/s3/
AWS IAM:         https://docs.aws.amazon.com/iam/

================================================================================

âœ¨ CLEANUP
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

To destroy all resources and stop charges:

  $ cd terraform-manifests
  $ terraform destroy

âš ï¸  WARNING: Empty the S3 bucket first, or use AWS console to force delete.

================================================================================
                         Created by Copilot Agent
                    HashiCorp Certified Terraform Associate
                             Module 19 - 2024
================================================================================
